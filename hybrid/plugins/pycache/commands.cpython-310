o
    Ã¿Ã«Ã’hÃŸ,  Ã£                   @   sÃ²  d dl Z d dlZd dlZd dlZd dlZd dlZd dlZd dl mZ d dl	m
Z
m
Z
 d dlm
Z
 d dl mZ d dl mZmZ d d lmZmZmZmZmZ d dlmZ d d	lT d d	lT d d
lmZ eed
dd
ÂggÆ’ZeÂ e
Â dÂ¡e
j @ Â¡de
defddâ€Æ’Z!eÂ e
Â dÂ¡e
Â "eÂ¡@ Â¡ddâ€ Æ’Z#eÂ e
Â dÂ¡e
Â "eÂ¡@ Â¡ddâ€ Æ’Z$eÂ e
Â dÂ¡e
Â "eÂ¡@ Â¡ddâ€ Æ’Z%eÂ e
Â dÂ¡e
Â "eÂ¡@ Â¡ddâ€ Æ’Z&eÂ e
Â dÂ¡e
Â "eÂ¡@ Â¡d d!â€ Æ’Z'eÂ e
Â d"Â¡e
Â "eÂ¡@ Â¡d#d$â€ Æ’Z(eÂ e
Â d%Â¡e
Â "eÂ¡@ Â¡d&d'â€ Æ’Z)eÂ e
Â d(Â¡e
Â "eÂ¡@ Â¡d)d*â€ Æ’Z*eÂ e
Â d+Â¡e
Â "eÂ¡@ Â¡d,d-â€ Æ’Z+eÂ e
Â d.Â¡e
Â "eÂ¡@ Â¡defd/d0â€Æ’Z,eÂ e
Â d1Â¡e
Â "eÂ¡@ Â¡defd2d3â€Æ’Z-eÂ e
Â d4Â¡e
Â "eÂ¡@ Â¡defd5d6â€Æ’Z.eÂ e
Â d7Â¡e
j @ Â¡defd8d9â€Æ’Z/eÂ e
Â d:Â¡e
j @ Â¡defd;d<â€Æ’Z0dS )=Ã©    N)Ãš Message)ÃšClientÃš filters)Ãš	FloodWait)Ãš
CallbackQuery)ÃšInlineKeyboardMarkupÃšInlineKeyboardButton)ÃšBotÃš
LOG_FILE_NAMEÃš loggingÃšADMINSÃšgen_4letters)Ãštemp)Ãš*)Ãš InvoicezBack to Admin MenuÃš
admin_panelÂ©Ãš
callback_dataÃšstartÃšclientÃš messagec                  Ãƒ   s  Â|j }t|jÆ’ t|jÆ’}|s6ttdddÂgtdddÂgtdd dÂgtdd	dÂggÆ’}|jd
|d
ÂI d H S t Â |t d Â¡}t|d
 ddÂt|d ddÂgt|d ddÂt|d ddÂgt|d ddÂgg}|jt	v rv|Â 
dtdddÂgÂ¡ |j|d j
|jdÂt|Æ’d
ÂI d H  d S )Nu   Ã°Å¸â€¡ÂºÃ°Å¸â€¡Â¸ EnglishÃš lang_enr   u   Ã°Å¸â€¡Â·Ã°Å¸â€¡Âº ÃÂ Ã‘Æ’Ã‘ÂÃ‘ÂÃÂºÃÂ¸ÃÂ¹Ãš lang_ruu   Ã°Å¸â€¡Â°Ã°Å¸â€¡Â· Ã­â€¢Å“ÃªÂµÂ­Ã¬â€“Â´Ãš lang_kou   Ã°Å¸â€¡Â¨Ã°Å¸â€¡Â³ Ã¤Â¸Â­Ã¦â€“â€¡Ãš lang_zhu!   Ã°Å¸Å’Â Please choose your language:Â©Ãšreply_markupÃšenÃšrentÃš rentnumÃš
my_rentalsÃš profileÃšhelpÃšcontact_supportzhttps://t.me/aress)Ãšurlr   u   Ã°Å¸â€ºÂ Ã¯Â¸Â Admin Panelr   Ãš welcome)Ãšname)
Ãš	from_userÃšsave_user_idÃšidÃšget_user_languager    r   ÃšreplyÃš	LANGUAGESÃšgetr   ÃšinsertÃšformatÃš mention) r   r   ÃšuserÃšlangÃškeyboardÃštÃšrowsÂ© r6   Ãº8/mnt/c/Users/LENOVO/RentalBot/hybrid/plugins/commands.pyÃš
start_command1   s0   â‚¬

Ã¼Ã¿Ã¿Ã»
*r8   Ãšupdatec              
   Ãƒ   sÂ¨   Âz't Â ddgÂ¡Â dÂ¡}dt|Æ’v r|Â dÂ¡I d H W S |Â d|â€º dÂÂ¡I d H  W n tyD } z|Â t|Æ’Â¡I d H W  Y d }~S d }~ww |Â d Â¡I d H }td|Æ’ d S )	NÃšgitÃšpullzUTF-8zAlready up to date.zIts already up-to date!z```z2**Updated with default branch, restarting now...**r	   ) Ãš
subprocessÃšcheck_outputÃšdecodeÃšstrÃš
reply_textÃš	ExceptionÃš restart)Ãš_r   ÃšoutÃšeÃšmr6   r6   r7   Ãšupdate_restartO   s   â‚¬ â‚¬Ã¿rG   rB   c                 Ãƒ   s    Â|Â  dÂ¡I d H }td|Æ’ d S )Nz**Restarting...**r	   )r@   rB   )rC   r   rF   r6   r6   r7   Ãšcommand_restart[   s   â‚¬rH   Ãšlogsc                 Ãƒ   s   Â|j tdÂI d H  d S )N)Ãšdocument)Ãšreply_documentr
   )rC   r   r6   r6   r7   Ãšlogs_cmd`   s   â‚¬rL   Ãš cleardbc                 Ãƒ   sË†   Âz
|j jdddÂI d H }W n ty   |Â dÂ¡I d H  Y S w |jÂ Â¡ Â Â¡ dkr1|Â dÂ¡I d H S t Æ’ \}} |rB|Â d Â¡I d H  d S d S )Nuh   Ã¢Å¡Â Ã¯Â¸Â Are you sure you want to clear the database? This action cannot be undone. Type 'YES' to confirm.Ã©   Â©Ãš timeoutÃµ   Ã¢ÂÂ° Timeout! Please try again.ÃšYESu'   Ã¢ÂÅ’ Database clear operation cancelled.u0   Ã¢Å“â€¦ All data has been cleared from the database.)ÃšchatÃšaskrA   r+   ÃštextÃšstripÃšupperÃšdelete_all_data)rC   r   ÃšresponseÃšstatr6   r6   r7   Ãšclear_db_cmdd   s   â‚¬Ã¾Ã¿
Ã¿r[   Ãš sysinfoc                 Ãƒ   sÂº   ÂzIt jddÂ}t Â Â¡ }t Â dÂ¡}dtÂ Â¡ â€º dtÂ Â¡ â€º dtÂ  Â¡ â€º d |â€º d|jâ€º d	t	|j
d
 d
Æ’â€º d|jâ€º d	t	|j
d
 d
Æ’â€º d
Â}|Â 
|Â¡I d H  W d S  ty\   |Â 
dÂ¡I d H  Y d S w )NÃ©   )ÃšintervalÃº/u(   **System Information:**
Ã°Å¸â€“Â¥Ã¯Â¸Â System: Ãš u   
Ã°Å¸â€™Â» Machine: u   
Ã°Å¸Â§Â  CPU Usage: u   %
Ã°Å¸â€™Â¾ Memory: z
% used of i   @Ã©   u    GB
Ã°Å¸â€”â€Ã¯Â¸Â Disk: z GB
uJ   Ã¢ÂÅ’ psutil module is not installed. Please install it to use this command.)
ÃšpsutilÃš
cpu_percentÃšvirtual_memoryÃš
disk_usageÃšplatformÃšsystemÃš releaseÃš machineÃš percentÃšroundÃštotalr+   Ãš
ImportError)rC   r   Ãš	cpu_usageÃšmemoryÃšdiskÃšsys_infor6   r6   r7   Ãš
sysinfo_cmds   s6   â‚¬
Ã¿Ã¿Ã¾Ã½Ã¼Ã¼Ã»Ã»Ã¿Ã¿rr   Ãšaddadminc                 Ãƒ   Ã³Â¢   Ât |jÆ’dkr|Â dÂ¡I d H S z	t|jd Æ’}W n ty*   |Â dÂ¡I d H  Y S w t|Æ’\}}|rA|Â d|â€º dÂÂ¡I d H  d S |Â d |â€º d|â€º ÂÂ¡I d H  d S )	Nra   zUsage: /addadmin <user_id>r]   Ãµ4   Ã¢ÂÅ’ Invalid user ID. Please provide a valid integer.Ãµ	   Ã¢Å“â€¦ User z has been added as an admin.Ãµ	   Ã¢ÂÅ’ User z could not be added. Status: )ÃšlenÃš commandr+   ÃšintÃš
ValueErrorÃš	add_adminÂ©rC   r   Ãš user_idÃš successÃšstatusr6   r6   r7   Ãš
add_admin_cmdâ€    Ã³   â‚¬Ã¿ rÂ   Ãšremadminc                 Ãƒ   rt   )	Nra   zUsage: /removeadmin <user_id>r]   ru   rv   z has been removed from admins.rw   z could not be removed. Status: )rx   ry   r+   rz   r{   Ãšremove_adminr}   r6   r6   r7   Ãšremove_admin_cmdâ€   râ€š   râ€¦   Ãš	broadcastc           	      Ãƒ   sâ€   Â|j s|Â dÂ¡I d H S |j }|s|Â dÂ¡I d H S tÂ i ddiÂ¡}d}d}|D ]â€¹}t|d Æ’} z|j| dÂI d H  |d7 }tÂ  d Â¡I d H  W q' tyâ€™ } z@tÂ  |j	Â¡I d H  z|j| dÂI d H  |d7 }W n! t
yâ€¡ } zt
Â d| â€º d	|â€º ÂÂ¡ |d7 }W Y d }~nd }~ww W Y d }~q'd }~w t
yÂ² } zt
Â d| â€º d
|â€º ÂÂ¡ |d7 }W Y d }~q'd }~ww |Â d
|â€º d|â€º ÂÂ¡I d H  d S )
Nz'Usage: /broadcast as reply to a messageu0   Ã¢ÂÅ’ Please reply to a text message to broadcast.r~   r]   r   )Ãš chat_idgÅ¡â„¢â„¢â„¢â„¢â„¢Â¹?zFailed to send broadcast to z after FloodWait: z: u'   Ã°Å¸â€œÂ¢ Broadcast completed!
Ã¢Å“â€¦ Success: u
   
Ã¢ÂÅ’ Failed: )
Ãšreply_to_messager+   Ãš	users_colÃšfindrz   ÃšcopyÃš asyncioÃšsleepr   ÃšxrA   r
   Ãšerror)	rC   r   Ãšbroadcast_messageÃšusersÃš
success_countÃš
fail_countr1   r~   rE   r6   r6   r7   Ãš
broadcast_cmdÂ¢   s@   â‚¬â‚¬Ã¾â‚¬â‚¬Ã¾ râ€   Ãšchecknumc                 Ãƒ   sÂ¦   Âz
|j jdddÂI d H }W n ty   |Â dÂ¡I d H  Y S w |jÂ dÂ¡r)|jnd}|s5|Â d Â¡I d H S t|Æ’}|rG|Â d|â€º d	ÂÂ¡I d H S |Â d
|â€º d
ÂÂ¡I d H S )Nu&   Ã¢Å¡Â Ã¯Â¸Â send the number you wanna checkrN   rO   rQ   z+888FuI   Ã¢ÂÅ’ Invalid number format. Please send a valid number starting with +888.u
   Ã¢Å“â€¦ Number z is available.u
   Ã¢ÂÅ’ Number z is not available.) rS   rT   rA   r+   rU   Ãš
startswithÃšcheck_number_conn)rC   r   rY   ÃšnumberÃšcheckr6   r6   r7   Ãš
check_num_cmdÃ   s    â‚¬Ã¾Ã¿rÅ¡   Ãš	exportcsvc              
   Ãƒ   sâ€   Âz*|Â  dÂ¡I d H }tdtÆ’ â€º dÂÆ’}|j|ddÂI d H  tÂ |Â¡ |Â Â¡ I d H  W d S  t yI } z|Â d|â€º ÂÂ¡I d H  W Y d }~d S d }~ww ) Nu(   Ã¢ÂÂ³ **Exporting numbers data to CSV...**Ãšnumbers_export_z.csvu   Ã°Å¸â€œâ€˜ Exported Numbers Data)Ãš captionu   Ã¢ÂÅ’ Failed to export: )	r+   Ãšexport_numbers_csvr
   rK   ÃšosÃšremoveÃšdeleterA   r@   )rC   r   ÃšmsgÃšfilenamerE   r6   r6   r7   Ãšexport_csv_cmdÃ”   s   â‚¬
$â‚¬Ã¿rÂ¤   Ãš checktxc                 Ãƒ   sÂ    Âz
|j jdddÂI d H }W n ty   |Â dÂ¡I d H  Y S w |j}t|Æ’\}}}|rD|rDd|â€º d|â€º d |â€º d|â€º Â} |Â | Â¡I d H S |Â d	|â€º d
ÂÂ¡I d H S )
Nu0   Ã¢Å¡Â Ã¯Â¸Â send the transaction hash you wanna checkÃ©,  rO   rQ   u$   Ã¢Å“â€¦ Transaction found!

Ã°Å¸â€â€” Hash: `u   `
Ã°Å¸ÂÂ¦ To: `u   `
Ã°Å¸â€™Â° Amount: r`   u   Ã¢ÂÅ’ Transaction z is not found or unconfirmed.)rS   rT   rA   r+   rU   Ãš
get_tron_tx)rC   r   rY   Ãš tx_hashÃštoÃšamountÃšsymbolrU   r6   r6   r7   Ãšcheck_tx_cmdÃŸ   s0   â‚¬Ã¾Ã¿Ã¿Ã¾Ã½Ã½Ã¿rÂ¬   Ãš	cleartxdbc                 Ãƒ   sâ€™   Âz
|j jdddÂI d H }W n ty   |Â dÂ¡I d H  Y S w |j}|s-|Â dÂ¡I d H S t|Æ’r=|Â d|â€º d ÂÂ¡I d H S |Â d|â€º d	ÂÂ¡I d H S )
Nu2   Ã¢Å¡Â Ã¯Â¸Â Send the transaction hash you want to clearrÂ¦   rO   rQ   u$   Ã¢ÂÅ’ Invalid transaction hash format.u   Ã¢Å“â€¦ Transaction z has been cleared.u    Ã¢ÂÅ’ Failed to clear transaction Ãš.)rS   rT   rA   r+   rU   Ãšremove_tron_tx_hash)rC   r   rY   rÂ¨   r6   r6   r7   Ãšclear_tx_db_cmdÃ¶   s   â‚¬Ã¾Ã¿rÂ°   Ãšbannedc                 Ãƒ   s>   Ât j}|s|Â dÂ¡I d H S ddÂ |Â¡ }|Â |Â¡I d H  d S )NzNo banned numbers.u   Ã°Å¸Å¡Â« Banned Numbers:

Ãš
)r   ÃšBLOCKED_NUMSr+   Ãšjoin)rC   r   ÃšBANNEDrU   r6   r6   r7   Ãš
banned_cmd
  s   â‚¬rÂ¶   Ãš	createbtnc                 Ãƒ   s`   Ât |jÆ’dk r|Â dÂ¡I d H S |jd }|jd }tt||dÂggÆ’}|jd|d ÂI d H  d S )NÃ©   z&Usage: /createbtn <button_text> <data>r]   ra   r   zHere is your button:r   )rx   ry   r+   r    r   )rC   r   Ãš
button_textÃšdatar3   r6   r6   r7   Ãšcreate_button_cmd  s   â‚¬

rÂ»   )1ÃšrerÅ¸   ÃšrandomrÅ’   r<   rb   rf   Ãšpyrogram.typesr   Ãšpyrogramr   r   Ãšpyrogram.errorsr   r   r    r   Ãšhybridr	   r
   r
   r   r
   Ãšhybrid.plugins.tempr   Ãšhybrid.plugins.funcÃšhybrid.plugins.dbÃš
aiosend.typesr   ÃšDEFAULT_ADMIN_BACK_KEYBOARDÃš
on_messagery   Ãš privater8   r1   rG   rH   rL   r[   rr   rÂ   râ€¦   râ€   rÅ¡   rÂ¤   rÂ¬   rÂ°   rÂ¶   rÂ»   r6   r6   r6   r7   Ãš<module>   sd   Ã¿










 
